{
  "name": "flow1",
  "description": "This is the default flow containing all of the default steps",
  "batchSize": 100,
  "threadCount": 4,
  "steps": {
    "1": {
      "name": "ingestion-step",
      "description": "This is the default ingestion step",
      "stepDefinitionName": "default-ingestion",
      "stepDefinitionType": "INGESTION",
      "customHook": {},
      "fileLocations": {
        "inputFilePath": "data/data",
        "outputURIReplacement": ".*data,''",
        "inputFileType": "json"
      },
      "options": {
        "outputFormat": "json",
        "collections": [
          "raw"
        ],
        "headers": {
          "sources": [
            {
              "name": "flow1"
            }
          ],
          "createdOn": "currentDateTime",
          "createdBy": "currentUser"
        }
      },
      "customHook": {
        "module": "/ferb/hook.sjs",
        "user": "admin",
        "runBefore": false
      }
    },
    "2": {
      "name": "map-films",
      "stepDefinitionName": "ferb",
      "stepDefinitionType": "CUSTOM",
      "options": {
        "sourceQuery": "cts.collectionQuery(['slappy'])",
        "collections": [
          "film"
        ],
        "genericHarmonize": {
          "entity": {
            "type": "Film",
            "version": "1.0.0"
          },
          "referenceDataMappings": [
            {
              "path": "language_id",
              "type": "language",
              "propertyName": "language"
            }
          ]
        }
      }
    },
    "3": {
      "name": "map-rentals",
      "stepDefinitionName": "ferb",
      "stepDefinitionType": "CUSTOM",
      "options": {
        "sourceQuery": "cts.collectionQuery(['test-rental'])",
        "collections": [
          "rental"
        ],
        "genericHarmonize": {
          "entity": {
            "type": "Rental",
            "version": "1.0.0"
          },
          "childQueries": [
            {
              "childCollection": "customer",
              "childPropertyName": "customer_id",
              "newPropertyName": "customer",
              "childPropertyHasRangeIndex": true
            }
          ]
        }
      }
    }
  }
}
